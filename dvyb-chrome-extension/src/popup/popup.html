<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DVYB</title>
  <link rel="stylesheet" href="popup.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="dvyb-popup">
    <!-- Logged-out state -->
    <div id="logged-out" class="dvyb-state" style="display: none;">
      <div class="dvyb-logo-section">
        <div class="dvyb-logo">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="8" fill="#F27D2B"/>
            <text x="16" y="22" text-anchor="middle" font-family="Space Grotesk, sans-serif" font-weight="700" font-size="16" fill="white">D</text>
          </svg>
          <span class="dvyb-logo-text">DVYB</span>
        </div>
        <p class="dvyb-tagline">Save ads from Meta Ad Library.<br>See what's winning. Create faster.</p>
      </div>

      <button id="btn-google-login" class="dvyb-btn dvyb-btn-google">
        <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/>
          <path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 009 18z" fill="#34A853"/>
          <path d="M3.964 10.71A5.41 5.41 0 013.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 000 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
          <path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 00.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/>
        </svg>
        Sign in with Google
      </button>

      <p class="dvyb-footer-text">Free forever. No credit card needed.</p>
    </div>

    <!-- Logged-in state -->
    <div id="logged-in" class="dvyb-state" style="display: none;">
      <!-- Top bar: logo + Dashboard button -->
      <div class="dvyb-topbar">
        <div class="dvyb-logo-small">
          <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="8" fill="#F27D2B"/>
            <text x="16" y="22" text-anchor="middle" font-family="Space Grotesk, sans-serif" font-weight="700" font-size="16" fill="white">D</text>
          </svg>
          <span class="dvyb-logo-text-sm">DVYB</span>
        </div>
        <a id="btn-dashboard" class="dvyb-dashboard-btn" href="#" target="_blank">
          Dashboard
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
            <polyline points="15 3 21 3 21 9"/>
            <line x1="10" y1="14" x2="21" y2="3"/>
          </svg>
        </a>
      </div>

      <!-- Menu links -->
      <div class="dvyb-menu">
        <button id="btn-refresh-saved" type="button" class="dvyb-menu-item dvyb-menu-item-button" title="Refresh Saved status on the open Meta Ad Library tab so it matches the server">
          <svg class="dvyb-menu-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 4 23 10 17 10"/>
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
          </svg>
          <span class="dvyb-menu-label">Refresh saved status</span>
        </button>
        <a id="link-meta-ad-library" class="dvyb-menu-item" href="https://www.facebook.com/ads/library/?active_status=active&ad_type=all&country=ALL&media_type=all" target="_blank">
          <svg class="dvyb-menu-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="24" height="24" rx="5" fill="#1877F2"/>
            <text x="12" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-weight="700" font-size="14" fill="white">f</text>
          </svg>
          <span class="dvyb-menu-label">Meta Ad Library</span>
          <svg class="dvyb-menu-ext" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
            <polyline points="15 3 21 3 21 9"/>
            <line x1="10" y1="14" x2="21" y2="3"/>
          </svg>
        </a>
      </div>

      <!-- Footer: account + sign out -->
      <div class="dvyb-footer">
        <div class="dvyb-account-row">
          <div class="dvyb-avatar" id="avatar">D</div>
          <div class="dvyb-account-details">
            <span class="dvyb-account-name" id="account-name">-</span>
            <span class="dvyb-account-email" id="account-email">-</span>
          </div>
          <button id="btn-logout" class="dvyb-logout-btn" title="Sign out">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Loading state -->
    <div id="loading" class="dvyb-state">
      <div class="dvyb-loading-spinner"></div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
